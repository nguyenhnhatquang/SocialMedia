/*! For license information please see main.955034e5.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,a){var n={"./admin":53,"./admin.js":53,"./auth":45,"./auth.js":45,"./discover":89,"./discover.js":89,"./home":54,"./home.js":54,"./message":50,"./message/":50,"./message/[id]":93,"./message/[id].js":93,"./message/index":50,"./message/index.js":50,"./post/[id]":90,"./post/[id].js":90,"./profile/[id]":92,"./profile/[id].js":92,"./search":91,"./search.js":91};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=136},14:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return j}));var n=a(4),c=a.n(n),r=a(2),s=a(5),o=a(3),i=a(8),u={GET_NOTIFIES:"GET_NOTIFIES",CREATE_NOTIFY:"CREATE_NOTIFY",REMOVE_NOTIFY:"REMOVE_NOTIFY",UPDATE_NOTIFY:"UPDATE_NOTIFY",UPDATE_SOUND:"UPDATE_SOUND",DELETE_ALL_NOTIFICATIONS:"DELETE_ALL_NOTIFICATIONS"},l=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(s){var u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.d)("notify",t,a.token);case 3:u=e.sent,n.emit("createNotify",Object(r.a)(Object(r.a)({},u.data.notify),{},{user:{username:a.user.username,avatar:a.user.avatar}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.a)("notify/".concat(t.id,"?url=").concat(t.url),a.token);case 3:n.emit("removeNotify",t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.b)("notifies",e);case 3:n=t.sent,a({type:u.GET_NOTIFIES,payload:n.data.notifies}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:o.c.ALERT,payload:{error:t.t0.response.data.msg}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},15:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return j})),a.d(t,"g",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return m}));var n=a(4),c=a.n(n),r=a(2),s=a(5),o=a(3),i=a(8),u={ADD_USER:"ADD_USER",ADD_MESSAGE:"ADD_MESSAGE",GET_CONVERSATIONS:"GET_CONVERSATIONS",GET_MESSAGES:"GET_MESSAGES",UPDATE_MESSAGES:"UPDATE_MESSAGES",DELETE_MESSAGES:"DELETE_MESSAGES",DELETE_CONVERSATION:"DELETE_CONVERSATION",CHECK_ONLINE_OFFLINE:"CHECK_ONLINE_OFFLINE"},l=function(e){var t=e.user,a=e.message;return function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.users.every((function(e){return e._id!==t._id}))&&n({type:u.ADD_USER,payload:Object(r.a)(Object(r.a)({},t),{},{text:"",media:[]})});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:u.ADD_MESSAGE,payload:t}),n.emit("addMessage",t),e.prev=2,e.next=5,Object(i.d)("message",t,a.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.auth,a=e.page,n=void 0===a?1:a;return function(){var e=Object(s.a)(c.a.mark((function e(a){var s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("conversations?limit=".concat(9*n),t.token);case 3:s=e.sent,l=[],s.data.conversations.forEach((function(e){e.recipients.forEach((function(a){a._id!==t.user._id&&l.push(Object(r.a)(Object(r.a)({},a),{},{text:e.text,media:e.media}))}))})),a({type:u.GET_CONVERSATIONS,payload:{newArr:l,result:s.data.result}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.auth,a=e.id,n=e.page,r=void 0===n?1:n;return function(){var e=Object(s.a)(c.a.mark((function e(n){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("message/".concat(a,"?limit=").concat(9*r),t.token);case 3:s=e.sent,n({type:u.GET_MESSAGES,payload:s.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.msg,a=e.data,n=e.auth;return function(){var e=Object(s.a)(c.a.mark((function e(r){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.a)(a,t._id),r({type:u.DELETE_MESSAGES,payload:{newData:s,_id:t.recipient}}),e.prev=2,e.next=5,Object(i.a)("message/".concat(t._id),n.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.auth,a=e.id;return function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:u.DELETE_CONVERSATION,payload:a}),e.prev=1,e.next=4,Object(i.a)("conversation/".concat(a),t.token);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(51),s=a.n(r),o=a(11),i=a(13),u=a(6),l=a(94),d=a.n(l),j=a(0),b=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("section",{className:"error-container",children:[Object(j.jsx)("span",{className:"four",children:Object(j.jsx)("span",{className:"screen-reader-text",children:"4"})}),Object(j.jsx)("span",{className:"zero",children:Object(j.jsx)("span",{className:"screen-reader-text",children:"0"})}),Object(j.jsx)("span",{className:"four",children:Object(j.jsx)("span",{className:"screen-reader-text",children:"4"})})]})})},p=function(){var e=Object(i.h)(),t=e.page,n=e.id,r="";return Object(u.c)((function(e){return e})).auth.token&&(r=n?"".concat(t,"/[id]"):"".concat(t)),function(e){try{return c.a.createElement(a(136)("./".concat(e)).default)}catch(t){return Object(j.jsx)(b,{})}}(r)},m=a(2),O=function(e){return localStorage.getItem("firstLogin")?Object(j.jsx)(i.b,Object(m.a)({},e)):Object(j.jsx)(i.a,{to:"/"})},h=a(54),f=a(45),v=function(){return Object(j.jsx)("div",{className:"loading",children:Object(j.jsxs)("div",{className:"loader",children:[Object(j.jsx)("div",{className:"inner one"}),Object(j.jsx)("div",{className:"inner two"}),Object(j.jsx)("div",{className:"inner three"})]})})},g=function(e){var t=e.msg,a=e.handleShow,n=e.bgColor;return Object(j.jsxs)("div",{className:"toast toast--".concat(n),children:[Object(j.jsx)("div",{className:"toast__icon"}),Object(j.jsxs)("div",{className:"toast__content",children:[Object(j.jsx)("p",{className:"toast__type",children:t.title}),Object(j.jsx)("p",{className:"toast__message",children:t.body})]}),Object(j.jsx)("div",{className:"toast__close",onClick:a,onclose:setTimeout(a,3e3),children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15.6 15.6",children:Object(j.jsx)("path",{d:"M8.9 7.8l6.5-6.5c0.3-0.3 0.3-0.8 0-1.1 -0.3-0.3-0.8-0.3-1.1 0L7.8 6.8 1.3 0.2c-0.3-0.3-0.8-0.3-1.1 0 -0.3 0.3-0.3 0.8 0 1.1l6.5 6.5L0.2 14.4c-0.3 0.3-0.3 0.8 0 1.1 0.1 0.1 0.3 0.2 0.5 0.2s0.4-0.1 0.5-0.2l6.5-6.5 6.5 6.5c0.1 0.1 0.3 0.2 0.5 0.2 0.2 0 0.4-0.1 0.5-0.2 0.3-0.3 0.3-0.8 0-1.1L8.9 7.8z"})})})]})},x=a(3),y=function(){var e=Object(u.c)((function(e){return e})).alert,t=Object(u.b)();return Object(j.jsxs)(j.Fragment,{children:[e.loading&&Object(j.jsx)(v,{}),e.error&&Object(j.jsx)(g,{msg:{title:"Th\u1ea5t b\u1ea1i",body:e.error},handleShow:function(){return t({type:x.c.ALERT,payload:{}})},bgColor:"red"}),e.success&&Object(j.jsx)(g,{msg:{title:"Th\xe0nh c\xf4ng",body:e.success},handleShow:function(){return t({type:x.c.ALERT,payload:{}})},bgColor:"green"})]})},_=a(30),N=a(9),E=a(4),T=a.n(E),k=a(5),w=a(8),S=a(14),A="GET_TOTAL_USERS",L="GET_TOTAL_POSTS",C="GET_TOTAL_COMMENTS",P="GET_TOTAL_LIKES",R="GET_TOTAL_SPAM_POSTS",D="GET_TOTAL_ACTIVE_USERS",I="GET_SPAM_POSTS",U="LOADING_ADMIN",F="DELETE_POST",G=a(15),q=a.p+"static/media/pristine.9287f5ce.mp3",M=function(){var e=Object(u.c)((function(e){return e})),t=e.auth,a=e.socket,c=e.notify,r=Object(u.b)(),s=Object(n.useRef)();return Object(n.useEffect)((function(){"user"===t.user.role?a.emit("joinUser",t.user._id):"admin"===t.user.role&&a.emit("joinAdmin",t.user._id)}),[a,t.user.role,t.user._id]),Object(n.useEffect)((function(){return a.on("getActiveUsersToClient",(function(e){r({type:D,payload:e})})),function(){return a.off("getActiveUsersToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("likeToClient",(function(e){r({type:N.a.UPDATE_POST,payload:e})})),function(){return a.off("likeToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("unLikeToClient",(function(e){r({type:N.a.UPDATE_POST,payload:e})})),function(){return a.off("unLikeToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("createCommentToClient",(function(e){r({type:N.a.UPDATE_POST,payload:e})})),function(){return a.off("createCommentToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("deleteCommentToClient",(function(e){r({type:N.a.UPDATE_POST,payload:e})})),function(){return a.off("deleteCommentToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("followToClient",(function(e){r({type:x.c.AUTH,payload:Object(m.a)(Object(m.a)({},t),{},{user:e})})})),function(){return a.off("followToClient")}}),[a,r,t]),Object(n.useEffect)((function(){return a.on("unFollowToClient",(function(e){r({type:x.c.AUTH,payload:Object(m.a)(Object(m.a)({},t),{},{user:e})})})),function(){return a.off("unFollowToClient")}}),[a,r,t]),Object(n.useEffect)((function(){return a.on("createNotifyToClient",(function(e){var t,a,n;r({type:S.a.CREATE_NOTIFY,payload:e}),c.sound&&s.current.play(),t=e.user.username+" "+e.text,a=e.user.avatar,n=e.url,new Notification("CAMPUS CONNECT",{body:t,icon:a}).onclick=function(e){e.preventDefault(),window.open(n,"_blank")}})),function(){return a.off("createNotifyToClient")}}),[a,r,c.sound]),Object(n.useEffect)((function(){return a.on("removeNotifyToClient",(function(e){r({type:S.a.REMOVE_NOTIFY,payload:e})})),function(){return a.off("removeNotifyToClient")}}),[a,r]),Object(n.useEffect)((function(){return a.on("addMessageToClient",(function(e){r({type:G.a.ADD_MESSAGE,payload:e})})),function(){return a.off("addMessageToClient")}}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("audio",{controls:!0,ref:s,style:{display:"none"},children:Object(j.jsx)("source",{src:q,type:"audio/mp3"})})})},H=a(53),z=a(35),V=a(7),B=function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(V.a)(r,2),o=s[0],l=s[1],d=Object(u.c)((function(e){return e})).auth,b=Object(u.b)(),p=Object(i.f)(),m=function(){var e=Object(k.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(w.b)("search?username=".concat(a),d.token);case 6:return n=e.sent,l(n.data.users),e.next=10,p.push({pathname:"/search",state:{users:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),b({type:x.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("form",{className:"search-container",onSubmit:m,children:[Object(j.jsx)("img",{className:"search-icon",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912691/icon/search_trw2ne.svg",alt:"message"}),Object(j.jsx)("input",{type:"text",className:"search-bar",placeholder:"Nh\u1ea5n enter \u0111\u1ec3 t\xecm ki\u1ebfm",value:a,onChange:function(e){return c(e.target.value.toLowerCase().replace(/ /g," "))}}),Object(j.jsx)("img",{className:"search-icon--close",onClick:function(){c(""),l([])},src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"message",style:a?{visibility:"visible"}:{visibility:"hidden"}})]})},Y=a(16),W=function(){var e=Object(n.useState)(!1),t=Object(V.a)(e,2),a=t[0],c=t[1],r=Object(u.c)((function(e){return e})),s=r.auth,i=(r.notify,Object(u.b)());return Object(j.jsxs)("div",{className:"header-items--container",children:[Object(j.jsx)("div",{className:"header--items",style:{marginRight:"7px"},children:Object(j.jsx)(o.b,{to:"/message",style:{marginTop:"5px"},children:Object(j.jsx)("img",{className:"header-items--item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626911007/icon/messenger_mdvyiu.svg",alt:"message"})})}),Object(j.jsx)("div",{className:"header--items",style:{marginRight:"7px",marginLeft:"7px"},children:Object(j.jsx)(o.b,{style:{marginTop:"5px"},children:Object(j.jsx)("img",{className:"header-items--item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626911353/icon/notification_pdi7ow.svg",alt:"message"})})}),Object(j.jsx)("div",{className:"header--items",style:{marginRight:"7px",marginLeft:"7px"},children:Object(j.jsx)(o.b,{style:{marginTop:"5px"},children:Object(j.jsx)("img",{className:"header-items--item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627072775/icon/night_mc6qyb.svg",alt:"message"})})}),Object(j.jsx)("input",{type:"checkbox",className:"header--checkbox",checked:a}),Object(j.jsxs)("div",{className:"header--items header--dropdown_menu",style:{marginLeft:"7px"},onClick:function(){return c(!a)},children:[Object(j.jsx)(Y.a,{src:s.user.avatar,size:"medium-avatar"}),Object(j.jsx)("img",{className:"header-items--item_arrow",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626918789/icon/down-arrow_xdmdlc.svg",alt:"message"})]}),Object(j.jsxs)("ul",{className:"header--ul",children:[Object(j.jsx)("li",{className:"header--li",children:Object(j.jsxs)(o.b,{className:"header--li_profile",to:"/profile/".concat(s.user._id),children:[Object(j.jsx)(Y.a,{src:s.user.avatar,size:"big-avatar"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:s.user.username}),Object(j.jsx)("span",{children:"Xem trang c\xe1 nh\xe2n"})]})]})}),Object(j.jsx)("li",{className:"header--li",onClick:function(){return i({type:x.c.CHANGE_PASSWORD,payload:!0})},children:Object(j.jsxs)("div",{className:"header--li_logout",children:[Object(j.jsx)("img",{className:"header-items--item_logout",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627688858/icon/key_wsxvsj.svg",alt:"message"}),Object(j.jsx)("span",{children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"})]})}),Object(j.jsx)("li",{className:"header--li",style:{borderBottom:"none"},onClick:function(){return i(Object(_.c)())},children:Object(j.jsxs)(o.b,{className:"header--li_logout",to:"/auth",children:[Object(j.jsx)("img",{className:"header-items--item_logout",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626926472/icon/logout_mqcubj.svg",alt:"message"}),Object(j.jsx)("span",{children:"\u0110\u0103ng xu\u1ea5t"})]})})]})]})},K=function(){var e=Object(u.c)((function(e){return e})).auth,t=Object(u.b)();return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsxs)(o.b,{to:"/",className:"header-logo",onClick:function(){window.scrollTo({top:0}),t(Object(N.e)(e.token)),t(Object(z.b)(e.token))},children:[Object(j.jsx)("img",{className:"header-logo--img",alt:"logo",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626886904/logo_nwimwg.png"}),Object(j.jsx)("span",{className:"header-logo--name",children:"Social Media"})]}),Object(j.jsx)("div",{className:"header-search",children:Object(j.jsx)(B,{})}),Object(j.jsx)("div",{className:"header-items",children:Object(j.jsx)(W,{})})]})},X=a(10),J=a(23),Q=function(){var e=Object(u.c)((function(e){return e})),t=e.auth,a=e.theme,c=e.status,r=e.socket,s=Object(u.b)(),o=Object(n.useState)(""),i=Object(V.a)(o,2),l=i[0],d=i[1],b=Object(n.useState)([]),p=Object(V.a)(b,2),m=p[0],O=p[1],h=Object(n.useState)(!1),f=Object(V.a)(h,2),v=f[0],g=f[1],y=Object(n.useRef)(),_=Object(n.useRef)(),E=Object(n.useState)(""),T=Object(V.a)(E,2),k=T[0],w=T[1],S=function(){k&&(k.stop(),g(!1))};return Object(n.useEffect)((function(){c.onEdit&&(d(c.content),O(c.images))}),[c]),Object(j.jsx)("div",{className:"status-modal",children:Object(j.jsxs)("form",{className:"status-modal_form",onSubmit:function(e){return e.preventDefault(),m.length>5?s({type:x.c.ALERT,payload:{error:"Vui l\xf2ng kh\xf4ng ch\u1ecdn qu\xe1 5 \u1ea3nh/video"}}):0===m.length?s({type:x.c.ALERT,payload:{error:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t 1 \u1ea3nh/video"}}):(c.onEdit?s(Object(N.k)({content:l,images:m,auth:t,status:c})):s(Object(N.b)({content:l,images:m,auth:t,socket:r})),d(""),O([]),k&&k.stop(),void s({type:x.c.STATUS,payload:!1}))},children:[Object(j.jsxs)("div",{className:"status-modal_header",children:[Object(j.jsx)("span",{className:"status-modal_header-title",children:"T\u1ea1o b\xe0i vi\u1ebft"}),Object(j.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"message",onClick:function(){s({type:x.c.STATUS,payload:!1}),S()}})]}),Object(j.jsxs)("div",{className:"status-modal_body",children:[Object(j.jsx)("textarea",{className:"status-modal_body-textArea",name:"content",value:l,placeholder:"B\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?",onChange:function(e){return d(e.target.value)}}),Object(j.jsx)("div",{className:"status-modal_body-images",children:m.map((function(e,t){return Object(j.jsxs)("div",{className:"status-modal_body-image",children:[e.camera?Object(J.a)(e.camera,a):e.url?Object(j.jsx)(j.Fragment,{children:e.url.match(/video/i)?Object(J.b)(e.url,a):Object(J.a)(e.url,a)}):Object(j.jsx)(j.Fragment,{children:e.type.match(/video/i)?Object(J.b)(URL.createObjectURL(e),a):Object(J.a)(URL.createObjectURL(e),a)}),Object(j.jsx)("span",{className:"status-modal_body-imageClose",onClick:function(){return function(e){var t=Object(X.a)(m);t.splice(e,1),O(t)}(t)},children:Object(j.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"close"})})]},t)}))}),v&&Object(j.jsxs)("div",{className:"status-modal_body-stream",children:[Object(j.jsx)("video",{autoPlay:!0,muted:!0,ref:y,width:"100%",height:"100%",style:{filter:a?"invert(1)":"invert(0)"}}),Object(j.jsx)("span",{className:"status-modal_body-streamClose",onClick:S,children:Object(j.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"close"})}),Object(j.jsx)("canvas",{ref:_,style:{display:"none"}})]}),Object(j.jsx)("div",{className:"status-modal_body-icons",children:v?Object(j.jsx)("img",{className:"status-modal_body-icon",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627442036/icon/camera_daaon8.svg",alt:"message",onClick:function(){var e=y.current.clientWidth,t=y.current.clientHeight;_.current.setAttribute("width",e),_.current.setAttribute("height",t),_.current.getContext("2d").drawImage(y.current,0,0,e,t);var a=_.current.toDataURL();O([].concat(Object(X.a)(m),[{camera:a}]))}}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:"status-modal_body-icon",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627442036/icon/camera_daaon8.svg",alt:"message",onClick:function(){g(!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){y.current.srcObject=e,y.current.play();var t=e.getTracks();w(t[0])})).catch((function(e){return console.log(e)}))}}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"file",children:Object(j.jsx)("img",{className:"status-modal_body-icon",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627442469/icon/picture_sphbkd.svg",alt:"message"})}),Object(j.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/* video/mp4",onChange:function(e){var t=Object(X.a)(e.target.files),a="",n=[];t.forEach((function(e){return e?e.size>5242880?a="\u1ea2nh/Video c\xf3 k\xedch th\u01b0\u1edbc l\u1edbn h\u01a1n 5Mb":n.push(e):a="Th\u01b0 m\u1ee5c kh\xf4ng t\u1ed3n t\u1ea1i1"})),a&&s({type:x.c.ALERT,payload:{error:a}}),O([].concat(Object(X.a)(m),n))},style:{display:"none"}})]})]})})]}),Object(j.jsx)("button",{className:"status-modal_submit",type:"submit",variant:"contained",disabled:!l,children:"\u0110\u0103ng"})]})})},Z=a(33),$=a.n(Z),ee=(a(157),function(){var e=Object(u.c)((function(e){return e})).auth;return Object(j.jsxs)("div",{className:"left-side",children:[Object(j.jsxs)(o.b,{to:"/profile/".concat(e.user._id),className:"left-side_avatar",children:[Object(j.jsx)(Y.a,{src:e.user.avatar,size:"big-avatar"}),Object(j.jsxs)("div",{className:"left-side_avatar-info",children:[Object(j.jsx)("strong",{children:e.user.fullName}),Object(j.jsxs)("span",{children:["@",e.user.username]})]})]}),Object(j.jsxs)("ul",{className:"left-side_ul",children:[Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{className:"left-side_link",children:[Object(j.jsx)("img",{className:"left-side_item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626972126/icon/friends_u2pjpg.svg",alt:"message"}),Object(j.jsx)("span",{children:"B\u1ea1n b\xe8"})]})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("img",{className:"left-side_item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626972440/icon/networking_dvzt4z.svg",alt:"message"}),Object(j.jsx)("span",{children:"Nh\xf3m"})]}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:"/discover",className:"left-side_link",children:[Object(j.jsx)("img",{className:"left-side_item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626972686/icon/compass_xjczoa.svg",alt:"message"}),Object(j.jsx)("span",{children:"Kh\xe1m ph\xe1"})]})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("img",{className:"left-side_item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626972877/icon/video_z4in4a.svg",alt:"message"}),Object(j.jsx)("span",{children:"Video"})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("img",{className:"left-side_item",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626972933/icon/statistics_dnm5ot.svg",alt:"message"}),Object(j.jsx)("span",{children:"Th\u1ed1ng k\xea"})]})]})]})}),te=function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(V.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(""),d=Object(V.a)(l,2),b=d[0],p=d[1],m=Object(u.c)((function(e){return e})).auth,O=Object(u.b)();return Object(j.jsx)("div",{className:"change-password",onSubmit:function(e){e.preventDefault(),O(Object(_.a)({oldPassword:a,newPassword:o,cnfNewPassword:b,auth:m})),O({type:x.c.CHANGE_PASSWORD,payload:!1})},children:Object(j.jsxs)("form",{className:"change-password_form",children:[Object(j.jsxs)("div",{className:"change-password_header",children:[Object(j.jsx)("span",{className:"change-password_header-title",children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),Object(j.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"close",onClick:function(){return O({type:x.c.CHANGE_PASSWORD,payload:!1})}})]}),Object(j.jsxs)("div",{className:"change-password_body",children:[Object(j.jsxs)("div",{className:"change-password_body-items",children:[Object(j.jsx)("label",{htmlFor:"oldPassword",className:"change-password_body-items-label",children:"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i"}),Object(j.jsx)("input",{type:"text",id:"oldPassword",name:"oldPassword",value:a,autoFocus:!0,onChange:function(e){return c(e.target.value)},className:"change-password_body-items-input"})]}),Object(j.jsxs)("div",{className:"change-password_body-items",children:[Object(j.jsx)("label",{htmlFor:"oldPassword",className:"change-password_body-items-label",children:"M\u1eadt kh\u1ea9u m\u1edbi"}),Object(j.jsx)("input",{type:"text",id:"newPassword",name:"newPassword",value:o,onChange:function(e){return i(e.target.value)},className:"change-password_body-items-input"})]}),Object(j.jsxs)("div",{className:"change-password_body-items",children:[Object(j.jsx)("label",{htmlFor:"oldPassword",className:"change-password_body-items-label",children:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u"}),Object(j.jsx)("input",{type:"text",id:"cnfNewPassword",name:"cnfNewPassword",value:b,onChange:function(e){return p(e.target.value)},className:"change-password_body-items-input"})]})]}),Object(j.jsx)("button",{className:"change-password_submit",type:"submit",disabled:!(a&&o&&b),children:"C\u1eadp nh\u1eadt"})]})})},ae=a(31),ne=(a(34),a(17)),ce=function(){var e=Object(n.useState)({fullName:"",mobile:"",address:"",website:"",story:"",gender:""}),t=Object(V.a)(e,2),a=t[0],c=t[1],r=a.fullName,s=a.website,o=a.story,i=(a.gender,Object(u.c)((function(e){return e})).auth),l=Object(u.b)();Object(n.useEffect)((function(){c(i.user)}),[i.user]);var d=function(e){var t=e.target,n=t.name,r=t.value;c(Object(m.a)(Object(m.a)({},a),{},Object(ae.a)({},n,r)))};return Object(j.jsx)("div",{className:"edit-profile",children:Object(j.jsxs)("form",{className:"edit-profile_form",onSubmit:function(e){e.preventDefault(),l(Object(ne.e)({userData:a,auth:i}))},children:[Object(j.jsxs)("div",{className:"edit-profile_header",children:[Object(j.jsx)("span",{className:"edit-profile_header-title",children:"Ch\u1ec9nh s\u1eeda trang c\xe1 nh\xe2n"}),Object(j.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"message",onClick:function(){l({type:x.c.EDIT_PROFILE,payload:!1})}})]}),Object(j.jsxs)("div",{className:"edit-profile_body",children:[Object(j.jsxs)("div",{className:"edit-profile_body-fullName",children:[Object(j.jsx)("label",{className:"edit-profile_body-label",htmlFor:"fullName",children:"T\xean c\u1ee7a b\u1ea1n"}),Object(j.jsx)("input",{type:"text",className:"edit-profile_body-input",id:"fullName",name:"fullName",value:r,placeholder:"T\xean c\u1ee7a b\u1ea1n",onChange:d}),r.length<=25?Object(j.jsxs)("small",{className:"edit-profile_body-countName",children:[r.length,"/25"]}):Object(j.jsxs)("small",{className:"edit-profile_body-countName",style:{color:"red"},children:[r.length,"/25"]})]}),Object(j.jsxs)("div",{className:"edit-profile_body-fullName",children:[Object(j.jsx)("label",{className:"edit-profile_body-label",htmlFor:"fullName",children:"Website"}),Object(j.jsx)("input",{type:"text",className:"edit-profile_body-input",id:"website",name:"website",value:s,placeholder:"Website",onChange:d})]}),Object(j.jsxs)("div",{className:"edit-profile_body-fullName",children:[Object(j.jsx)("label",{className:"edit-profile_body-label",htmlFor:"fullName",children:"Story"}),Object(j.jsx)("textarea",{cols:"30",rows:"4",type:"text",className:"edit-profile_body-input",id:"story",name:"story",value:o,onChange:d}),o.length<=200?Object(j.jsxs)("small",{className:"edit-profile_body-countName",children:[o.length,"/200"]}):Object(j.jsxs)("small",{className:"edit-profile_body-countName",style:{color:"red"},children:[o.length,"/200"]})]})]}),Object(j.jsxs)("div",{className:"edit-profile_body-fullName",children:[Object(j.jsx)("label",{className:"edit-profile_body-label",htmlFor:"gender",children:"Gi\u1edbi t\xednh"}),Object(j.jsxs)("div",{className:"edit-profile_body-radioButton",children:[Object(j.jsx)("input",{type:"radio",id:"editProfileMale",name:"gender",value:"male",onChange:d,checked:"male"===a.gender}),Object(j.jsx)("label",{htmlFor:"editProfileMale",children:"Nam"}),Object(j.jsx)("input",{type:"radio",id:"editProfileFemale",name:"gender",value:"female",onChange:d,checked:"female"===a.gender}),Object(j.jsx)("label",{htmlFor:"editProfileFemale",children:"N\u1eef"}),Object(j.jsx)("input",{type:"radio",id:"editProfileOther",name:"gender",value:"other",onChange:d,checked:"other"===a.gender}),Object(j.jsx)("label",{htmlFor:"editProfileOther",children:"Kh\xe1c"})]})]}),Object(j.jsx)("button",{className:"edit-profile_submit",type:"submit",children:"C\u1eadp nh\u1eadt"})]})})};var re=function(){var e=Object(u.c)((function(e){return e})),t=e.auth,a=e.status,c=(e.modal,e.userType),r=e.changePassword,s=e.editProfile,l=Object(u.b)();return Object(n.useEffect)((function(){$.a.locale("vi"),$.a.updateLocale("vi",{longDateFormat:{LLLL:" LT dddd, Do/MM/YYYY"},weekdays:["Ch\u1ee7 nh\u1eadt","Th\u1ee9 Hai","Th\u1ee9 Ba","Th\u1ee9 T\u01b0","Th\u1ee9 N\u0103m","Th\u1ee9 S\xe1u","Th\u1ee9 B\u1ea3y"]})})),Object(n.useEffect)((function(){l(Object(_.d)());var e=d()();return l({type:x.c.SOCKET,payload:e}),function(){return e.close()}}),[l]),Object(n.useEffect)((function(){t.token&&(l(Object(N.e)(t.token)),l(Object(z.b)(t.token)),l(Object(S.c)(t.token)))}),[l,t.token]),Object(j.jsxs)(o.a,{children:[Object(j.jsx)(y,{}),Object(j.jsx)("input",{type:"checkbox",id:"theme"}),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"main",children:[t.token&&Object(j.jsx)(M,{}),a&&Object(j.jsx)(Q,{}),r&&Object(j.jsx)(te,{}),s&&Object(j.jsx)(ce,{}),"user"===c&&t.token&&Object(j.jsx)(K,{}),"user"===c&&t.token&&Object(j.jsx)(ee,{}),Object(j.jsx)(i.b,{exact:!0,path:"/",component:"user"===c?t.token?h.default:f.default:t.token?H.default:f.default}),"user"===c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{exact:!0,path:"/:page",component:p}),Object(j.jsx)(O,{exact:!0,path:"/:page/:id",component:p})]})]})})]})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,160)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},oe=(a(158),a(41)),ie=a(97),ue={},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.AUTH:return t.payload;default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.USER_TYPE:return t.payload;default:return e}},je={},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.ALERT:return t.payload;default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.THEME:return t.payload;default:return e}},me={loading:!1,ids:[],users:[],posts:[]},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne.a.LOADING:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case ne.a.GET_USER:return Object(m.a)(Object(m.a)({},e),{},{users:[].concat(Object(X.a)(e.users),[t.payload.user])});case ne.a.FOLLOW:case ne.a.UNFOLLOW:return Object(m.a)(Object(m.a)({},e),{},{users:Object(x.b)(e.users,t.payload._id,t.payload)});case ne.a.GET_ID:return Object(m.a)(Object(m.a)({},e),{},{ids:[].concat(Object(X.a)(e.ids),[t.payload])});case ne.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:[].concat(Object(X.a)(e.posts),[t.payload])});case ne.a.UPDATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.b)(e.posts,t.payload._id,t.payload)});default:return e}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.STATUS:return t.payload;default:return e}},fe={loading:!1,posts:[],result:0,page:2},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.a.CREATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:[t.payload].concat(Object(X.a)(e.posts))});case N.a.LOADING_POST:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case N.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,page:t.payload.page});case N.a.UPDATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.b)(e.posts,t.payload._id,t.payload)});case N.a.DELETE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.a)(e.posts,t.payload._id)});case N.a.REPORT_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.b)(e.posts,t.payload._id,t.payload)});default:return e}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.MODAL:return t.payload;default:return e}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.a.GET_POST:return[].concat(Object(X.a)(e),[t.payload]);case N.a.UPDATE_POST:return Object(x.b)(e,t.payload._id,t.payload);default:return e}},ye={total_users:0,total_posts:0,total_comments:0,total_likes:0,total_active_users:0,total_spam_posts:0,spam_posts:[]},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(m.a)(Object(m.a)({},e),{},{total_users:t.payload.total_users});case L:return Object(m.a)(Object(m.a)({},e),{},{total_posts:t.payload.total_posts});case C:return Object(m.a)(Object(m.a)({},e),{},{total_comments:t.payload.total_comments});case P:return Object(m.a)(Object(m.a)({},e),{},{total_likes:t.payload.total_likes});case R:return Object(m.a)(Object(m.a)({},e),{},{total_spam_posts:t.payload.total_spam_posts});case D:return Object(m.a)(Object(m.a)({},e),{},{total_active_users:t.payload});case U:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case I:return Object(m.a)(Object(m.a)({},e),{},{spam_posts:Object(X.a)(t.payload)});case F:return Object(m.a)(Object(m.a)({},e),{},{spam_posts:Object(x.a)(e.spam_posts,t.payload._id)});default:return e}},Ne=a(36),Ee={loading:!1,posts:[],result:9,page:2,firstLoad:!1},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne.a.LOADING:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case Ne.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,firstLoad:!0});case Ne.a.UPDATE_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(X.a)(t.payload.posts),result:t.payload.result,page:e.page+1});default:return e}},ke={loading:!1,users:[]},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.a.LOADING:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case z.a.GET_USERS:return Object(m.a)(Object(m.a)({},e),{},{users:t.payload.users});default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.SOCKET:return t.payload;default:return e}},Ae={loading:!1,data:[],sound:!1},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.a.GET_NOTIFIES:return Object(m.a)(Object(m.a)({},e),{},{data:t.payload});case S.a.CREATE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:[].concat(Object(X.a)(e.data),[t.payload])});case S.a.UPDATE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:Object(x.b)(e.data,t.payload._id,t.payload)});case S.a.UPDATE_SOUND:return Object(m.a)(Object(m.a)({},e),{},{sound:t.payload});case S.a.REMOVE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.id||e.url!==t.payload.url}))});case S.a.DELETE_ALL_NOTIFICATIONS:return Object(m.a)(Object(m.a)({},e),{},{data:t.payload});default:return e}},Ce={users:[],resultUsers:0,data:[],resultData:0,firstLoad:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.a.ADD_USER:return Object(m.a)(Object(m.a)({},e),{},{users:[].concat(Object(X.a)(e.data),[t.payload])});case G.a.ADD_MESSAGE:return Object(m.a)(Object(m.a)({},e),{},{data:[].concat(Object(X.a)(e.data),[t.payload]),users:e.users.map((function(e){return e._id===t.payload.recipient||e._id===t.payload.sender?Object(m.a)(Object(m.a)({},e),{},{text:t.payload.text,media:t.payload.media}):e}))});case G.a.GET_CONVERSATIONS:return Object(m.a)(Object(m.a)({},e),{},{users:t.payload.newArr,resultUsers:t.payload.result,firstLoad:!0});case G.a.GET_MESSAGES:return Object(m.a)(Object(m.a)({},e),{},{data:t.payload.messages.reverse(),resultData:t.payload.result});default:return e}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.CHANGE_PASSWORD:return t.payload;default:return e}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.EDIT_PROFILE:return t.payload;default:return e}},Ie=Object(oe.combineReducers)({auth:le,alert:be,theme:pe,profile:Oe,status:he,homePosts:ve,modal:ge,detailPost:xe,userType:de,admin:_e,discover:Te,suggestions:we,socket:Se,notify:Le,message:Pe,changePassword:Re,editProfile:De}),Ue=a(98),Fe=Object(oe.createStore)(Ie,Object(Ue.composeWithDevTools)(Object(oe.applyMiddleware)(ie.a))),Ge=function(e){var t=e.children;return Object(j.jsx)(u.a,{store:Fe,children:t})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(Ge,{children:Object(j.jsx)(re,{})})}),document.getElementById("root")),se()},16:function(e,t,a){"use strict";a(1);var n=a(0);t.a=function(e){var t=e.src,a=e.size;return Object(n.jsx)("img",{src:t,alt:"Avatar",className:a})}},17:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return O}));var n=a(10),c=a(4),r=a.n(c),s=a(2),o=a(5),i=a(3),u=a(8),l=a(34),d=a(14),j={LOADING:"LOADING_PROFILE",GET_USER:"GET_PROFILE_USER",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",GET_ID:"GET_PROFILE_ID",GET_POSTS:"GET_PROFILE_POSTS",UPDATE_POST:"UPDATE_PROFILE_POSTS"},b=function(e){var t=e.id,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c,o,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:j.GET_ID,payload:t}),e.prev=1,n({type:j.LOADING,payload:!0}),c=Object(u.b)("/user/".concat(t),a.token),o=Object(u.b)("/user_posts/".concat(t),a.token),e.next=7,c;case 7:return l=e.sent,e.next=10,o;case 10:d=e.sent,n({type:j.GET_USER,payload:l.data}),n({type:j.GET_POSTS,payload:Object(s.a)(Object(s.a)({},d.data),{},{_id:t,page:2})}),n({type:j.LOADING,payload:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.userData,a=e.avatar,n=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.fullName){e.next=2;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"Nh\u1eadp t\xean"}}));case 2:if(!(t.fullName.length>25)){e.next=4;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"T\xean qu\xe1 d\xe0i"}}));case 4:if(!(t.story.length>200)){e.next=6;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"Ti\u1ec3u s\u1eed qu\xe1 d\xe0i"}}));case 6:if(e.prev=6,c({type:i.c.ALERT,payload:{loading:!0}}),!a){e.next=12;break}return e.next=11,Object(l.a)([a]);case 11:o=e.sent;case 12:return e.next=14,Object(u.c)("user",Object(s.a)(Object(s.a)({},t),{},{avatar:a?o[0].url:n.user.avatar}),n.token);case 14:d=e.sent,c({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},n),{},{user:Object(s.a)(Object(s.a)(Object(s.a)({},n.user),t),{},{avatar:a?o[0].url:n.user.avatar})})}),c({type:i.c.ALERT,payload:{success:d.data.msg}}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.users,a=e.user,c=e.auth,l=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var b,p,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.every((function(e){return e._id!==a._id}))?b=Object(s.a)(Object(s.a)({},a),{},{followers:[].concat(Object(n.a)(a.followers),[c.user])}):t.forEach((function(e){e._id===a._id&&(b=Object(s.a)(Object(s.a)({},e),{},{followers:[].concat(Object(n.a)(e.followers),[c.user])}))})),o({type:j.FOLLOW,payload:b}),o({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},c),{},{user:Object(s.a)(Object(s.a)({},c.user),{},{following:[].concat(Object(n.a)(c.user.following),[b])})})}),e.prev=3,e.next=6,Object(u.c)("/user/".concat(a._id,"/follow"),null,c.token);case 6:p=e.sent,l.emit("follow",p.data.newUser),m={id:c.user._id,text:"\u0110\xe3 theo d\xf5i b\u1ea1n",recipients:[b._id],url:"/profile/".concat(c.user._id)},o(Object(d.b)({msg:m,auth:c,socket:l})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.users,a=e.user,n=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var l,b,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.every((function(e){return e._id!==a._id}))?l=Object(s.a)(Object(s.a)({},a),{},{followers:Object(i.a)(a.followers,n.user._id)}):t.forEach((function(e){e._id===a._id&&(l=Object(s.a)(Object(s.a)({},e),{},{followers:Object(i.a)(e.followers,n.user._id)}))})),o({type:j.UNFOLLOW,payload:l}),o({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},n),{},{user:Object(s.a)(Object(s.a)({},n.user),{},{following:Object(i.a)(n.user.following,l._id)})})}),e.prev=3,e.next=6,Object(u.c)("/user/".concat(a._id,"/unfollow"),null,n.token);case 6:b=e.sent,c.emit("unFollow",b.data.newUser),p={id:n.user._id,text:"\u0110\xe3 theo d\xf5i b\u1ea1n",recipients:[l._id],url:"/profile/".concat(n.user._id)},o(Object(d.d)({msg:p,auth:n,socket:c})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()}},20:function(e,t,a){"use strict";a(1);var n=a(16),c=a(11),r=a(0);t.a=function(e){var t=e.children,a=e.user;return Object(r.jsxs)("div",{className:"user-card",children:[Object(r.jsx)("div",{className:"user-card_avatar",children:Object(r.jsx)(n.a,{src:a.avatar,size:"medium-avatar"})}),Object(r.jsxs)(c.b,{to:"/profile/".concat(a._id),className:"user-card_information",children:[Object(r.jsx)("span",{className:"user-card_information-fullName",children:a.fullName}),Object(r.jsxs)("span",{className:"user-card_information-username",children:["@",a.username]})]}),t]})}},23:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a(0),c=function(e){return Object(n.jsx)("img",{src:e,className:"img-thumbnail",alt:"upload"})},r=function(e){return Object(n.jsx)("video",{controls:!0,src:e,className:"img-thumbnail",alt:"upload"})}},3:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var n={AUTH:"AUTH",ALERT:"ALERT",THEME:"THEME",STATUS:"STATUS",CHANGE_PASSWORD:"CHANGE_PASSWORD",EDIT_PROFILE:"EDIT_PROFILE",MODAL:"MODAL",USER_TYPE:"USER_TYPE",SOCKET:"SOCKET"},c=function(e,t,a){return e.map((function(e){return e._id===t?a:e}))},r=function(e,t){return e.filter((function(e){return e._id!==t}))}},30:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return j}));var n=a(4),c=a.n(n),r=a(5),s=a(8),o=a(3),i=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.c.ALERT,payload:{loading:!0}}),t.next=4,Object(s.d)("login",e);case 4:n=t.sent,a({type:o.c.AUTH,payload:{token:n.data.access_token,user:n.data.user}}),a({type:o.c.USER_TYPE,payload:n.data.user.role}),localStorage.setItem("firstLogin",!0),a({type:o.c.ALERT,payload:{success:n.data.msg}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:o.c.ALERT,payload:{error:t.t0.response.data.msg}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},u=function(e){var t=e.oldPassword,a=e.newPassword,n=e.cnfNewPassword,i=e.auth;return function(){var e=Object(r.a)(c.a.mark((function e(r){var u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&0!==t.length||r({type:o.c.ALERT,payload:{error:"Nh\u1eadp m\u1eadt kh\u1ea9u c\u0169"}}),a&&0!==a.length||r({type:o.c.ALERT,payload:{error:"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"}}),n&&0!==n.length||r({type:o.c.ALERT,payload:{error:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi"}}),a!==n&&r({type:o.c.ALERT,payload:{error:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp"}}),e.prev=4,r({type:o.c.ALERT,payload:{loading:!0}}),e.next=8,Object(s.d)("changePassword",{oldPassword:t,newPassword:a},i.token);case 8:u=e.sent,r({type:o.c.ALERT,payload:{loading:!1}}),r({type:o.c.ALERT,payload:{success:u.data.msg}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("firstLogin")){e.next=15;break}return t({type:o.c.ALERT,payload:{loading:!0}}),e.prev=3,e.next=6,Object(s.d)("refresh_token");case 6:a=e.sent,t({type:o.c.AUTH,payload:{token:a.data.access_token,user:a.data.user}}),t({type:o.c.USER_TYPE,payload:a.data.user.role}),t({type:o.c.ALERT,payload:{}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),t({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.c.ALERT,payload:{loading:!0}}),t.next=4,Object(s.d)("register",e);case 4:n=t.sent,a({type:o.c.AUTH,payload:{token:n.data.access_token,user:n.data.user}}),a({type:o.c.USER_TYPE,payload:n.data.user.role}),localStorage.setItem("firstLogin",!0),a({type:o.c.ALERT,payload:{success:n.data.msg}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:o.c.ALERT,payload:{error:t.t0.response.data.msg}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.c.ALERT,payload:{loading:!0}}),localStorage.removeItem("firstLogin"),e.next=5,Object(s.d)("logout");case 5:window.location.href="/",t({type:o.c.ALERT,payload:{loading:!1}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}},32:function(e,t,a){"use strict";a(1);var n=a(0);t.a=function(e){var t=e.result,a=e.page,c=e.load,r=e.handleLoadMore;return Object(n.jsx)(n.Fragment,{children:t<9*(a-1)?"":!c&&Object(n.jsx)("button",{className:"loadMoreButton",onClick:r,children:"Xem th\xeam"})})}},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(4),c=a.n(n),r=a(95),s=a(5),o=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n,s,o,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(r.a)(t),e.prev=2,n.s();case 4:if((s=n.n()).done){e.next=19;break}return o=s.value,i=new FormData,o.camera?i.append("file",o.camera):i.append("file",o),i.append("upload_preset","xqxi1mtl"),i.append("cloud_name","nguyenhnhatquang"),e.next=12,fetch("https://api.cloudinary.com/v1_1/nguyenhnhatquang/upload",{method:"POST",body:i});case 12:return u=e.sent,e.next=15,u.json();case 15:l=e.sent,a.push({public_id:l.public_id,url:l.secure_url});case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},35:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u}));var n=a(4),c=a.n(n),r=a(5),s=a(3),o=a(8),i={LOADING:"LOADING_SUGGESTIONS",GET_USERS:"GET_USERS_SUGGESTIONS"},u=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.LOADING,payload:!0}),t.next=4,Object(o.b)("suggestionsUser",e);case 4:n=t.sent,a({type:i.GET_USERS,payload:n.data}),a({type:i.LOADING,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u}));var n=a(4),c=a.n(n),r=a(5),s=a(3),o=a(8),i={LOADING:"LOADING_DISCOVER",GET_POSTS:"GET_DISCOVER_POSTS",UPDATE_POSTS:"UPDATE_DISCOVER_POSTS"},u=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.LOADING,payload:!0}),t.next=4,Object(o.b)("post_discover",e);case 4:n=t.sent,a({type:i.GET_POSTS,payload:n.data}),a({type:i.LOADING,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},40:function(e,t,a){"use strict";a(1);var n=a(11),c=a(6),r=a(0);t.a=function(e){var t=e.posts,a=e.result,s=Object(c.c)((function(e){return e})).theme;if(0===a)return Object(r.jsx)("h2",{style:{marginTop:"10px"},children:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft"});var o=function(e){return Object(r.jsx)("img",{src:e,alt:e,style:{filter:s?"invert(1)":"invert(0)"}})};return Object(r.jsx)("div",{className:"post_thumb",children:t&&t.map((function(e){return Object(r.jsx)(n.b,{to:"/post/".concat(e._id),children:Object(r.jsxs)("div",{className:"post_thumb_display",children:[e.images[0].url.match(/video/i)?(t=e.images[0].url,Object(r.jsx)("video",{controls:!0,src:t,alt:t,style:{filter:s?"invert(1)":"invert(0)"}})):o(e.images[0].url),Object(r.jsxs)("div",{className:"post_thumb_menu",children:[Object(r.jsx)("i",{className:"far fa-thumbs-up",children:e.likes.length}),Object(r.jsx)("i",{className:"far fa-comments",children:e.comments.length})]})]})},e._id);var t}))})}},45:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(31),r=a(2),s=a(7),o=a(13),i=a(6),u=a(30),l=a(0),d=function(){var e=Object(i.c)((function(e){return e})).auth,t=Object(n.useState)({email:"",password:""}),a=Object(s.a)(t,2),d=a[0],j=a[1],b=d.email,p=d.password,m=Object(o.f)(),O=Object(i.b)();Object(n.useEffect)((function(){e.token&&m.push("/")}),[e.token,m]);var h=function(e){var t=e.target,a=t.name,n=t.value;j(Object(r.a)(Object(r.a)({},d),{},Object(c.a)({},a,n)))};return Object(l.jsxs)("form",{className:"login--form",onSubmit:function(e){e.preventDefault(),O(Object(u.b)(d))},children:[Object(l.jsx)("div",{className:"auth--title",children:"\u0110\u0103ng nh\u1eadp"}),Object(l.jsxs)("div",{className:"auth--input-boxes",children:[Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-envelope"}),Object(l.jsx)("input",{type:"text",placeholder:"Nh\u1eadp email",name:"email",value:b,autoComplete:"email",onChange:h,required:!0,autoFocus:!0})]}),Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-lock"}),Object(l.jsx)("input",{type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",name:"password",value:p,autoComplete:"current-password",onChange:h,required:!0})]}),Object(l.jsx)("div",{className:"login--text",children:Object(l.jsx)("a",{href:"#",children:"Qu\xean m\u1eadt kh\u1ea9u"})}),Object(l.jsx)("div",{className:"auth--button",children:Object(l.jsx)("input",{type:"submit",value:"\u0110\u0103ng nh\u1eadp"})})]})]})},j=function(){var e=Object(i.c)((function(e){return e})).auth,t=Object(n.useState)({fullName:"",username:"",email:"",password:"",gender:"other"}),a=Object(s.a)(t,2),d=a[0],j=a[1],b=d.fullName,p=d.username,m=d.email,O=d.password,h=Object(o.f)(),f=Object(i.b)();Object(n.useEffect)((function(){e.token&&h.push("/")}),[e.token,h]);var v=function(e){var t=e.target,a=t.name,n=t.value;j(Object(r.a)(Object(r.a)({},d),{},Object(c.a)({},a,n)))};return Object(l.jsxs)("form",{className:"signup--form",onSubmit:function(e){e.preventDefault(),f(Object(u.e)(d))},children:[Object(l.jsx)("div",{className:"auth--title",children:"\u0110\u0103ng k\xfd"}),Object(l.jsxs)("div",{className:"auth--input-boxes",children:[Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-user"}),Object(l.jsx)("input",{type:"text",placeholder:"Nh\u1eadp t\xean c\u1ee7a b\u1ea1n",name:"fullName",value:b,autoComplete:"name",onChange:v,required:!0,autoFocus:!0})]}),Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-user"}),Object(l.jsx)("input",{type:"text",placeholder:"Nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp",name:"username",value:p,autoComplete:"username",onChange:v,required:!0})]}),Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-envelope"}),Object(l.jsx)("input",{type:"text",placeholder:"Nh\u1eadp email",name:"email",value:m,autoComplete:"email",onChange:v,required:!0,autoFocus:!0})]}),Object(l.jsxs)("div",{className:"auth--input-box",children:[Object(l.jsx)("i",{className:"fas fa-lock"}),Object(l.jsx)("input",{type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",name:"password",value:O,autoComplete:"current-password",onChange:v,required:!0})]}),Object(l.jsxs)("div",{className:"signup--gender-details",children:[Object(l.jsxs)("div",{className:"signup--gender",children:[Object(l.jsx)("input",{type:"radio",name:"gender",value:"male",onChange:v}),Object(l.jsx)("span",{children:"Nam"})]}),Object(l.jsxs)("div",{className:"signup--gender",children:[Object(l.jsx)("input",{type:"radio",name:"gender",value:"female",onChange:v}),Object(l.jsx)("span",{children:"N\u1eef"})]}),Object(l.jsxs)("div",{className:"signup--gender",children:[Object(l.jsx)("input",{type:"radio",name:"gender",value:"other",onChange:v,defaultChecked:!0}),Object(l.jsx)("span",{children:"Kh\xe1c"})]})]}),Object(l.jsx)("div",{className:"auth--button",children:Object(l.jsx)("input",{type:"submit",value:"\u0110\u0103ng k\xfd"})})]})]})};t.default=function(){return Object(l.jsxs)("div",{className:"auth",children:[Object(l.jsx)("input",{type:"checkbox",id:"flip",className:"auth--flip"}),Object(l.jsxs)("div",{className:"auth--cover",children:[Object(l.jsx)("div",{className:"auth--front",children:Object(l.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1625940936/background_x6rq9e.jpg",alt:"background"})}),Object(l.jsx)("div",{className:"auth--back",children:Object(l.jsx)("img",{className:"backImg",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1625940936/background_x6rq9e.jpg",alt:"background"})})]}),Object(l.jsxs)("div",{className:"auth--content",children:[Object(l.jsxs)("div",{className:"auth--login",children:[Object(l.jsx)(d,{}),Object(l.jsxs)("span",{children:["B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? ",Object(l.jsx)("label",{htmlFor:"flip",className:"auth--label",children:"\u0110\u0103ng k\xfd ngay"})]})]}),Object(l.jsxs)("div",{className:"auth--signup",children:[Object(l.jsx)(j,{}),Object(l.jsxs)("span",{children:["\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n? ",Object(l.jsx)("label",{htmlFor:"flip",className:"auth--label",children:"\u0110\u0103ng nh\u1eadp"})]})]})]})]})}},50:function(e,t,a){"use strict";a.r(t);a(1);var n=a(55),c=a(0);t.default=function(){return Object(c.jsxs)("div",{className:"message",children:[Object(c.jsx)("div",{className:"spaceRight"}),Object(c.jsxs)("div",{className:"messageBody",children:[Object(c.jsx)("div",{className:"message-left",children:Object(c.jsx)(n.a,{})}),Object(c.jsx)("div",{className:"message-right"})]})]})}},53:function(e,t,a){"use strict";a.r(t);a(1);var n=a(0);t.default=function(){return Object(n.jsx)("div",{children:"Admin Page"})}},54:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(6),r=a(16),s=a(3),o=a(0),i=function(){var e=Object(c.c)((function(e){return e})).auth,t=Object(c.b)();return Object(o.jsxs)("div",{className:"home-status",children:[Object(o.jsx)(r.a,{src:e.user.avatar,size:"big-avatar"}),Object(o.jsx)("button",{className:"home-status_button",onClick:function(){t({type:s.c.STATUS,payload:!0})},children:"B\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?"})]})},u=a(4),l=a.n(u),d=a(2),j=a(5),b=a(7),p=a(56),m=a(32),O=a(8),h=a(9),f=function(){var e=Object(c.c)((function(e){return e})),t=e.homePosts,a=e.auth,r=e.theme,s=Object(c.b)(),i=Object(n.useState)(!1),u=Object(b.a)(i,2),f=u[0],v=u[1],g=function(){var e=Object(j.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,Object(O.b)("posts?limit=".concat(9*t.page),a.token);case 3:n=e.sent,s({type:h.a.GET_POSTS,payload:Object(d.a)(Object(d.a)({},n.data),{},{page:t.page+1})}),v(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"home-posts",children:[t.posts.map((function(e){return Object(o.jsx)(p.a,{post:e,theme:r},e._id)})),f&&Object(o.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading...",style:{marginTop:"20px"}}),Object(o.jsx)(m.a,{result:t.result,page:t.page,load:f,handleLoadMore:g})]})},v=(a(35),a(20)),g=function(){var e=Object(c.c)((function(e){return e})),t=e.auth,a=e.suggestions;Object(c.b)();return Object(o.jsxs)("div",{className:"right-side",children:[Object(o.jsxs)("div",{className:"right-side_friends",children:[Object(o.jsx)("span",{className:"right-side_friends-title",children:"B\u1ea1n b\xe8 c\u1ee7a b\u1ea1n"}),Object(o.jsxs)("div",{children:[t.user.friends.map((function(e){return Object(o.jsx)(v.a,{user:e},e._id)})),Object(o.jsx)(v.a,{user:t.user},t.user._id)]})]}),0!=a.users.length&&Object(o.jsxs)("div",{className:"right-side_suggestion",children:[Object(o.jsx)("span",{className:"right-side_suggestion_title",children:"\u0110\u1ec1 xu\u1ea5t"}),Object(o.jsx)("div",{children:a.users.map((function(e){return Object(o.jsx)(v.a,{user:e},e._id)}))})]})]})};t.default=function(){var e=Object(c.c)((function(e){return e})).homePosts;return Object(o.jsxs)("div",{className:"home",children:[Object(o.jsxs)("div",{className:"home-body",children:[Object(o.jsx)(i,{}),e.loading?Object(o.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"loading",style:{marginTop:"20px",marginLeft:"25%"}}):0===e.result?Object(o.jsx)("h2",{className:"text-center",children:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft"}):Object(o.jsx)(f,{})]}),Object(o.jsx)("div",{className:"home-right",children:Object(o.jsx)(g,{})})]})}},55:function(e,t,a){"use strict";var n=a(4),c=a.n(n),r=a(5),s=a(7),o=a(1),i=a(6),u=a(13),l=a(3),d=a(15),j=a(8),b=a(20),p=a(0);t.a=function(){var e=Object(i.c)((function(e){return e})),t=e.auth,a=e.message,n=Object(i.b)(),m=Object(u.f)(),O=Object(u.h)().id,h=Object(o.useRef)(),f=Object(o.useState)(0),v=Object(s.a)(f,2),g=v[0],x=v[1],y=Object(o.useState)(""),_=Object(s.a)(y,2),N=_[0],E=_[1],T=Object(o.useState)([]),k=Object(s.a)(T,2),w=k[0],S=k[1],A=function(){var e=Object(r.a)(c.a.mark((function e(a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),N){e.next=3;break}return e.abrupt("return",S([]));case 3:return e.prev=3,e.next=6,Object(j.b)("search?username=".concat(N),t.token);case 6:r=e.sent,S(r.data.users),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n({type:l.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return E(""),S([]),n(Object(d.c)({user:e,message:a})),m.push("/message/".concat(e._id))},C=function(e){return O===e._id?"active":""};return Object(o.useEffect)((function(){a.firstLoad||n(Object(d.f)({auth:t}))}),[n,t,a.firstLoad]),Object(o.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&x((function(e){return e+1}))}),{threshold:.1}).observe(h.current)}),[x]),Object(o.useEffect)((function(){a.resultUsers>=9*(g-1)&&g>1&&n(Object(d.f)({auth:t,page:g}))}),[a.resultUsers,g,t,n]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{className:"message-left_form",onSubmit:A,children:[Object(p.jsx)("input",{type:"text",value:N,onChange:function(e){return E(e.target.value)},placeholder:"Nh\u1ea5n enter \u0111\u1ec3 t\xecm ki\u1ebfm"}),Object(p.jsx)("button",{style:{display:"none"},type:"submit",id:"search"})]}),Object(p.jsxs)("div",{className:"message-left_list",children:[0!==w.length?Object(p.jsx)(p.Fragment,{children:w.map((function(e){return Object(p.jsx)("div",{className:"message_user ".concat(C(e)),onClick:function(){return L(e)},children:Object(p.jsx)(b.a,{user:e})},e._id)}))}):Object(p.jsx)(p.Fragment,{children:a.users.map((function(e){return Object(p.jsx)("div",{className:"message_user ".concat(C(e)),onClick:function(){return L(e)},children:Object(p.jsx)(b.a,{user:e,msg:!0,children:Object(p.jsx)("i",{className:"fas fa-circle"})})},e._id)}))}),Object(p.jsx)("button",{style:{opacity:0},ref:h,children:"Xem th\xeam"})]})]})}},56:function(e,t,a){"use strict";var n=a(1),c=a(2),r=a(16),s=a(13),o=a(11),i=a(6),u=a(33),l=a.n(u),d=a(9),j=a(3),b=a(0),p=function(e){var t=e.post,a=Object(i.c)((function(e){return e})),n=a.auth,u=a.socket,p=Object(i.b)(),m=Object(s.f)();return Object(b.jsxs)("div",{className:"card-header",children:[Object(b.jsx)("div",{className:"card-header_avatar",children:Object(b.jsx)(r.a,{src:t.user.avatar,size:"big-avatar"})}),Object(b.jsxs)("div",{className:"card-header_user",children:[Object(b.jsx)("span",{children:Object(b.jsx)(o.b,{to:"/profile/".concat(t.user._id),className:"card-header_user-name",children:t.user.fullName})}),Object(b.jsx)("span",{className:"card-header_user-createdAt",children:l()(t.createdAt).format("LLLL")})]}),Object(b.jsxs)("div",{className:"card-header_dropDown",children:[Object(b.jsx)("input",{className:"card-header_dropDown-input",id:"card-header_".concat(t._id),type:"checkbox"}),Object(b.jsx)("label",{htmlFor:"card-header_".concat(t._id),children:Object(b.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627459882/icon/more_u9f94p.svg",alt:"more"})}),Object(b.jsx)("div",{className:"card-header_dropDown-menu",children:n.user._id===t.user._id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"card-header_dropDown-item",onClick:function(){p({type:j.c.STATUS,payload:Object(c.a)(Object(c.a)({},t),{},{onEdit:!0})})},children:"Ch\u1ec9nh S\u1eeda"}),Object(b.jsx)("div",{className:"card-header_dropDown-item",onClick:function(){if(window.confirm("B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n xo\xe1?"))return p(Object(d.c)({post:t,auth:n,socket:u})),m.push("/")},children:"Xo\xe1"})]}):Object(b.jsx)("div",{className:"card-header_dropDown-item",onClick:function(){p(Object(d.g)({post:t,auth:n}))},children:"B\xe1o c\xe1o"})})]})]})},m=a(7),O=function(e){var t=e.images,a=e.id,c=Object(n.useState)(0),r=Object(m.a)(c,2),s=r[0],o=r[1],i=Object(n.useRef)(null);return Object(n.useEffect)((function(){return i.current&&clearTimeout(i.current),i.current=setTimeout((function(){return o((function(e){return e===t.length-1?0:e+1}))}),2500),function(){}}),[s]),Object(b.jsxs)("div",{className:"slide-show",id:a,children:[Object(b.jsx)("div",{className:"slide-show-slider",style:{transform:"translate3d(".concat(100*-s,"%, 0, 0)")},children:t.map((function(e,t){return Object(b.jsx)("div",{className:"slide",children:e.url.match(/video/i)?Object(b.jsx)("video",{controls:!0,src:e.url,alt:e.url}):Object(b.jsx)("img",{src:e.url,alt:e.url})},t)}))}),Object(b.jsx)("div",{className:"slide-show-dots",children:t.map((function(e,t){return Object(b.jsx)("div",{className:"slide-show-dot".concat(s===t?" active":""),onClick:function(){o(t)}},t)}))})]})},h=function(e){var t=e.post,a=e.theme,c=Object(n.useState)(!1),r=Object(m.a)(c,2),s=r[0],o=r[1];return Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"card-body_content",style:{filter:a?"invert(1)":"invert(0)",color:a?"white":"#111"},children:Object(b.jsxs)("p",{className:"card-body_content-text",children:[t.content.length<60?t.content:s?t.content+" ":t.content.slice(0,55)+"... ",t.content.length>60&&Object(b.jsx)("span",{className:"card-body_content-textMore",onClick:function(){return o(!s)},children:s?"\u1ea8n":"Xem th\xeam"})]})}),Object(b.jsx)("div",{className:"images",children:t.images.length>0&&Object(b.jsx)(O,{images:t.images,id:t._id})})]})},f=a(4),v=a.n(f),g=a(5),x=function(e){var t=e.className,a=e.isLike,n=e.handleLike,c=e.handleUnLike;return Object(b.jsx)(b.Fragment,{children:a?Object(b.jsx)("img",{className:t,src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627476034/icon/heart_full_jgml7q.svg",alt:"heart",onClick:c}):Object(b.jsx)("img",{className:t,src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627476001/icon/heart_dnjyql.svg",alt:"heart",onClick:n})})},y=function(e){var t=e.post,a=Object(n.useState)(!1),c=Object(m.a)(a,2),r=c[0],s=c[1],u=Object(n.useState)(!1),l=Object(m.a)(u,2),j=l[0],p=l[1],O=Object(i.c)((function(e){return e})),h=O.auth,f=O.socket,y=Object(i.b)(),_=Object(n.useState)(!1),N=Object(m.a)(_,2),E=N[0],T=N[1],k=Object(n.useState)(!1),w=Object(m.a)(k,2),S=w[0],A=w[1];Object(n.useEffect)((function(){t.likes.find((function(e){return e._id===h.user._id}))?s(!0):s(!1)}),[t.likes,h.user._id]);var L=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,y(Object(d.f)({post:t,auth:h,socket:f}));case 5:p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,y(Object(d.i)({post:t,auth:h,socket:f}));case 5:p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h.user.saved.find((function(e){return e===t._id}))?T(!0):T(!1)}),[h.user.saved,t._id]);var P=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:return A(!0),e.next=5,y(Object(d.h)({post:t,auth:h}));case 5:A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:return A(!0),e.next=5,y(Object(d.j)({post:t,auth:h}));case 5:A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"card-footer",children:[Object(b.jsxs)("div",{className:"card-footer_like",children:[Object(b.jsx)(x,{className:"card-footer_icon-button",isLike:r,handleLike:L,handleUnLike:C}),Object(b.jsx)("span",{className:"card-footer_count",children:t.likes.length})]}),Object(b.jsxs)(o.b,{to:"/post/".concat(t._id),className:"card-footer_comment",children:[Object(b.jsx)("img",{className:"card-footer_icon-button",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627477286/icon/comments_okihza.svg",alt:"heart",onClick:C}),Object(b.jsx)("span",{className:"card-footer_count",children:t.comments.length})]}),Object(b.jsx)("div",{className:"card-footer_save",children:E?Object(b.jsx)("img",{className:"card-footer_icon-button",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627477470/icon/bookmark_full_oxk6mm.svg",alt:"heart",onClick:R}):Object(b.jsx)("img",{className:"card-footer_icon-button",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627477490/icon/bookmark_nbhzjk.svg",alt:"heart",onClick:P})})]})},_=a(10),N=a(14),E=a(8),T=function(e){var t=e.comment,a=e.post,n=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(r){var s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(c.a)(Object(c.a)({},t),{},{likes:[].concat(Object(_.a)(t.likes),[n.user])}),o=Object(j.b)(a.comments,t._id,s),i=Object(c.a)(Object(c.a)({},a),{},{comments:o}),r({type:d.a.UPDATE_POST,payload:i}),e.prev=4,e.next=7,Object(E.c)("comment/".concat(t._id,"/like"),null,n.token);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),r({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},k=function(e){var t=e.comment,a=e.post,n=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(r){var s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(c.a)(Object(c.a)({},t),{},{likes:Object(j.a)(t.likes,n.user._id)}),o=Object(j.b)(a.comments,t._id,s),i=Object(c.a)(Object(c.a)({},a),{},{comments:o}),r({type:d.a.UPDATE_POST,payload:i}),e.prev=4,e.next=7,Object(E.c)("comment/".concat(t._id,"/unlike"),null,n.token);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),r({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},w=function(e){var t=e.children,a=e.post,r=e.onReply,s=e.setOnReply,o=Object(n.useState)(""),u=Object(m.a)(o,2),l=u[0],p=u[1],O=Object(i.c)((function(e){return e})),h=O.auth,f=O.socket,x=Object(i.b)(),y=function(e){if(e.preventDefault(),!l.trim())return s?s(!1):void 0;p("");var t={content:l,likes:[],user:h.user,createdAt:(new Date).toISOString(),reply:r&&r.commentId,tag:r&&r.user};return x(function(e){var t=e.post,a=e.newComment,n=e.auth,r=e.socket;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i,u,l,b,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(c.a)(Object(c.a)({},t),{},{comments:[].concat(Object(_.a)(t.comments),[a])}),s({type:d.a.UPDATE_POST,payload:o}),e.prev=2,i=Object(c.a)(Object(c.a)({},a),{},{postId:t._id,postUserId:t.user._id}),e.next=6,Object(E.d)("comment",i,n.token);case 6:u=e.sent,l=Object(c.a)(Object(c.a)({},u.data.newComment),{},{user:n.user}),b=Object(c.a)(Object(c.a)({},t),{},{comments:[].concat(Object(_.a)(t.comments),[l])}),s({type:d.a.UPDATE_POST,payload:b}),r.emit("createComment",b),p={id:u.data.newComment._id,text:a.reply?" \u0111\u1ec1 c\u1eadp \u0111\u1ebfn b\u1ea1n trong m\u1ed9t b\xecnh lu\u1eadn":" \u0111\xe3 nh\u1eadn x\xe9t b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n",recipients:a.reply?[a.tag._id]:[t.user._id],url:"/post/".concat(t._id),content:a.reply?a.content:t.content,image:t.images[0].url},s(Object(N.b)({msg:p,auth:n,socket:r})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),s({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()}({post:a,newComment:t,auth:h,socket:f})),s?s(!1):void 0};return Object(b.jsxs)("form",{className:"inputComment",onSubmit:y,children:[t,Object(b.jsxs)("div",{className:"inputComment-main",children:[Object(b.jsx)("input",{className:"inputComment-main_input",type:"text",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn...",value:l,onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("span",{className:"inputComment-main_submit",type:"submit",onClick:y,children:Object(b.jsx)("i",{className:"far fa-paper-plane"})})]})]})},S=function(e){var t=e.children,a=e.comment,s=e.post,u=e.commentId,p=Object(i.c)((function(e){return e})),O=p.auth,h=p.socket,f=Object(i.b)(),y=Object(n.useState)(""),S=Object(m.a)(y,2),A=S[0],L=S[1],C=Object(n.useState)(!1),P=Object(m.a)(C,2),R=P[0],D=P[1],I=Object(n.useState)(!1),U=Object(m.a)(I,2),F=U[0],G=U[1],q=Object(n.useState)(!1),M=Object(m.a)(q,2),H=M[0],z=M[1],V=Object(n.useState)(!1),B=Object(m.a)(V,2),Y=B[0],W=B[1];Object(n.useEffect)((function(){L(a.content),G(!1),W(!1),a.likes.find((function(e){return e._id===O.user._id}))&&G(!0)}),[a,O.user._id]);var K=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return G(!0),z(!0),e.next=6,f(T({comment:a,post:s,auth:O}));case 6:z(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return G(!1),z(!0),e.next=6,f(k({comment:a,post:s,auth:O}));case 6:z(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"commentCard",style:{flexDirection:"column"},children:[Object(b.jsxs)("div",{className:"commentCard",children:[Object(b.jsx)("div",{className:"commentCard-avatar",children:Object(b.jsx)(r.a,{src:a.user.avatar,size:"medium-avatar"})}),Object(b.jsxs)("div",{className:"commentCard-content",children:[Object(b.jsxs)("div",{className:"commentCard-content_text",children:[Object(b.jsx)(o.b,{to:"/profile/".concat(a.user._id),className:"commentCard-content_name",children:a.user.fullName}),Object(b.jsx)("div",{className:"",children:R?Object(b.jsx)("textarea",{className:"commentCard-content_textArea",rows:"3",value:A,onChange:function(e){return L(e.target.value)}}):Object(b.jsxs)("div",{children:[a.tag&&a.tag._id!==a.user._id&&Object(b.jsxs)(o.b,{to:"/profile/".concat(a.tag._id),className:"",children:["@",a.tag.username]}),Object(b.jsx)("span",{className:"",children:A})]})})]}),Object(b.jsxs)("div",{className:"commentCard-content_button",children:[R?Object(b.jsxs)("div",{className:"commentCard-content_button-item",children:[Object(b.jsx)("small",{style:{marginRight:"10px"},onClick:function(){a.content!==A?(f(function(e){var t=e.comment,a=e.post,n=e.content,r=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(j.b)(a.comments,t._id,Object(c.a)(Object(c.a)({},t),{},{content:n})),i=Object(c.a)(Object(c.a)({},a),{},{comments:o}),s({type:d.a.UPDATE_POST,payload:i}),e.prev=3,e.next=6,Object(E.c)("comment/".concat(t._id),{content:n},r.token);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),s({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()}({comment:a,post:s,content:A,auth:O})),D(!1)):D(!1)},children:"Xong"}),Object(b.jsx)("small",{onClick:function(){return D(!1)},children:"Hu\u1ef7"})]}):Object(b.jsx)("small",{className:"commentCard-content_button-item",onClick:function(){if(Y)return W(!1);W(Object(c.a)(Object(c.a)({},a),{},{commentId:u}))},children:Y?"Hu\u1ef7":"Tr\u1ea3 l\u1eddi"}),Object(b.jsx)("span",{className:"commentCard-content_button-date",children:l()(a.createdAt).fromNow()})]}),a.likes.length>0&&Object(b.jsxs)("div",{className:"commentCard-likeCount",children:[Object(b.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627476034/icon/heart_full_jgml7q.svg",alt:"heart"}),Object(b.jsx)("span",{children:a.likes.length})]}),Object(b.jsx)(x,{className:"commentCard-likeButton",isLike:F,handleLike:K,handleUnLike:X})]}),Object(b.jsxs)("div",{className:"commentCard-menu",children:[Object(b.jsx)("input",{className:"card-header_dropDown-input",id:"card-header_".concat(u),type:"checkbox"}),Object(b.jsx)("label",{htmlFor:"card-header_".concat(u),children:Object(b.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627459882/icon/more_u9f94p.svg",alt:"more"})}),Object(b.jsxs)("div",{className:"card-header_dropDown-menu",style:{width:"60px"},children:[a.user._id===O.user._id&&Object(b.jsx)("div",{className:"card-header_dropDown-item",onClick:function(){return D(!0)},children:"S\u1eeda"}),(s.user._id===O.user._id||a.user._id===O.user._id)&&Object(b.jsx)("div",{className:"card-header_dropDown-item",onClick:function(){s.user._id!==O.user._id&&a.user._id!==O.user._id||f(function(e){var t=e.post,a=e.comment,n=e.auth,r=e.socket;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[].concat(Object(_.a)(t.comments.filter((function(e){return e.reply===a._id}))),[a]),i=Object(c.a)(Object(c.a)({},t),{},{comments:t.comments.filter((function(e){return!o.find((function(t){return e._id===t._id}))}))}),s({type:d.a.UPDATE_POST,payload:i}),r.emit("deleteComment",i);try{o.forEach((function(e){Object(E.a)("comment/".concat(e._id),n.token);var a={id:e._id,text:e.reply?" \u0111\u1ec1 c\u1eadp \u0111\u1ebfn b\u1ea1n trong m\u1ed9t b\xecnh lu\u1eadn":" \u0111\xe3 nh\u1eadn x\xe9t b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n",recipients:e.reply?[e.tag._id]:[t.user._id],url:"/post/".concat(t._id)};s(Object(N.d)({msg:a,auth:n,socket:r}))}))}catch(u){s({type:j.c.ALERT,payload:{error:u.response.data.msg}})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({post:s,auth:O,comment:a,socket:h}))},children:"Xo\xe1"})]})]})]}),Y&&Object(b.jsx)("div",{className:"commentCard-reply",children:Object(b.jsx)(w,{post:s,onReply:Y,setOnReply:W,children:Object(b.jsxs)(o.b,{to:"/profile/".concat(Y.user._id),children:["@",Y.user.username,":"]})})}),t]})},A=function(e){var t=e.comment,a=e.post,c=e.replyCm,r=Object(n.useState)([]),s=Object(m.a)(r,2),o=s[0],i=s[1],u=Object(n.useState)(1),l=Object(m.a)(u,2),d=l[0],j=l[1];return Object(n.useEffect)((function(){i(c.slice(c.length-d))}),[c,d]),Object(b.jsxs)(S,{comment:t,post:a,commentId:t._id,children:[o.map((function(e,n){return e.reply&&Object(b.jsx)(S,{comment:e,post:a,commentId:t._id},n)})),c.length-d>0?Object(b.jsx)("div",{className:"more-comment",onClick:function(){return j(d+10)},children:"Xem th\xeam"}):c.length>1&&Object(b.jsx)("div",{className:"more-comment",onClick:function(){return j(1)},children:"\u1ea8n b\u1edbt"})]})},L=function(e){var t=e.post,a=Object(n.useState)([]),c=Object(m.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)([]),i=Object(m.a)(o,2),u=i[0],l=i[1],d=Object(n.useState)(2),j=Object(m.a)(d,2),p=j[0],O=j[1],h=Object(n.useState)([]),f=Object(m.a)(h,2),v=f[0],g=f[1];return Object(n.useEffect)((function(){var e=t.comments.filter((function(e){return!e.reply}));s(e),l(e.slice(e.length-p))}),[t.comments,p]),Object(n.useEffect)((function(){var e=t.comments.filter((function(e){return e.reply}));g(e)}),[t.comments]),Object(b.jsx)("div",{className:"comment",children:Object(b.jsxs)("div",{className:"comment-container",children:[u.map((function(e,a){return Object(b.jsx)(A,{comment:e,post:t,replyCm:v.filter((function(t){return t.reply===e._id}))},a)})),r.length-p>0?Object(b.jsx)("div",{className:"more-comment",onClick:function(){return O(p+10)},children:"Xem th\xeam ..."}):r.length>2&&Object(b.jsx)("div",{className:"more-comment",onClick:function(){return O(2)},children:"\u1ea8n b\u1edbt"})]})})};t.a=function(e){var t=e.post,a=e.theme;return Object(b.jsxs)("div",{className:"post-card",children:[Object(b.jsx)(p,{post:t}),Object(b.jsx)(h,{post:t,theme:a}),Object(b.jsx)(y,{post:t}),Object(b.jsx)(L,{post:t}),Object(b.jsx)(w,{post:t})]})}},8:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return d}));var n=a(4),c=a.n(n),r=a(5),s=a(42),o=a.n(s),i=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/".concat(t),{headers:{Authorization:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/".concat(t),a,{headers:{Authorization:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("/api/".concat(t),a,{headers:{Authorization:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/api/".concat(t),{headers:{Authorization:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},89:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),r=a(5),s=a(7),o=a(1),i=a(6),u=a(36),l=a(40),d=a(8),j=a(32),b=a(0),p="https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif";t.default=function(){var e=Object(i.c)((function(e){return e})),t=e.auth,a=e.discover,n=Object(i.b)(),m=Object(o.useState)(!1),O=Object(s.a)(m,2),h=O[0],f=O[1];Object(o.useEffect)((function(){a.firstLoad||n(Object(u.b)(t.token))}),[n,t.token,a.firstLoad]);var v=function(){var e=Object(r.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,Object(d.b)("post_discover?num=".concat(8*a.page),t.token);case 3:r=e.sent,n({type:u.a.UPDATE_POSTS,payload:r.data}),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"discover",children:[a.loading?Object(b.jsx)("img",{src:p,alt:"Loading...",className:"d-block mx-auto my-4"}):Object(b.jsx)(l.a,{posts:a.posts,result:a.result}),h&&Object(b.jsx)("img",{src:p,alt:"Loading...",className:"d-block mx-auto"}),!a.loading&&Object(b.jsx)(j.a,{result:a.result,page:a.page,load:h,handleLoadMore:v})]})}},9:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"f",(function(){return O})),a.d(t,"i",(function(){return h})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return v})),a.d(t,"g",(function(){return g})),a.d(t,"h",(function(){return x})),a.d(t,"j",(function(){return y}));var n=a(10),c=a(4),r=a.n(c),s=a(2),o=a(5),i=a(3),u=a(8),l=a(34),d=a(14),j={CREATE_POST:"CREATE_POST",LOADING_POST:"LOADING_POST",GET_POSTS:"GET_POSTS",UPDATE_POST:"UPDATE_POST",GET_POST:"GET_POST",DELETE_POST:"DELETE_POST",REPORT_POST:"REPORT_POST",SAVE_POST:"SAVE_POST"},b=function(e){var t=e.content,a=e.images,n=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var b,p,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=[],e.prev=1,o({type:i.c.ALERT,payload:{loading:!0}}),!(a.length>0)){e.next=7;break}return e.next=6,Object(l.a)(a);case 6:b=e.sent;case 7:return e.next=9,Object(u.d)("posts",{content:t,images:b},n.token);case 9:p=e.sent,o({type:j.CREATE_POST,payload:Object(s.a)(Object(s.a)({},p.data.newPost),{},{user:n.user})}),o({type:i.c.ALERT,payload:{loading:!1}}),m={id:p.data.newPost._id,text:"\u0110\xe3 th\xeam m\u1ed9t b\xe0i vi\u1ebft m\u1edbi",recipients:p.data.newPost.user.followers,url:"/post/".concat(p.data.newPost._id),content:t,image:b[0].url},o(Object(d.b)({msg:m,auth:n,socket:c})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j.LOADING_POST,payload:!0}),t.next=4,Object(u.b)("posts",e);case 4:n=t.sent,a({type:j.GET_POSTS,payload:Object(s.a)(Object(s.a)({},n.data),{},{page:2})}),a({type:j.LOADING_POST,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:i.c.ALERT,payload:{error:t.t0.response.data.msg}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){var t=e.content,a=e.images,c=e.auth,s=e.status;return function(){var e=Object(o.a)(r.a.mark((function e(o){var d,b,p,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=[],b=a.filter((function(e){return!e.url})),p=a.filter((function(e){return e.url})),s.content!==t||0!==b.length||p.length!==s.images.length){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,o({type:i.c.ALERT,payload:{loading:!0}}),!(b.length>0)){e.next=11;break}return e.next=10,Object(l.a)(b);case 10:d=e.sent;case 11:return e.next=13,Object(u.c)("post/".concat(s._id),{content:t,images:[].concat(Object(n.a)(p),Object(n.a)(d))},c.token);case 13:m=e.sent,o({type:j.UPDATE_POST,payload:m.data.newPost}),o({type:i.c.ALERT,payload:{success:m.data.msg}}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.post,a=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var l,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(s.a)(Object(s.a)({},t),{},{likes:[].concat(Object(n.a)(t.likes),[a.user])}),o({type:j.UPDATE_POST,payload:l}),c.emit("likePost",l),e.prev=3,e.next=6,Object(u.c)("post/".concat(t._id,"/like"),null,a.token);case 6:b={id:a.user._id,text:"Th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n",recipients:[t.user._id],url:"/post/".concat(t._id),content:t.content,image:t.images[0].url},o(Object(d.b)({msg:b,auth:a,socket:c})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.post,a=e.auth,n=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.a)(Object(s.a)({},t),{},{likes:t.likes.filter((function(e){return e._id!==a.user._id}))}),c({type:j.UPDATE_POST,payload:o}),n.emit("unLikePost",o),e.prev=3,e.next=6,Object(u.c)("post/".concat(t._id,"/unlike"),null,a.token);case 6:l={id:a.user._id,text:"Th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n",recipients:[t.user._id],url:"/post/".concat(t._id)},c(Object(d.d)({msg:l,auth:a,socket:n})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.detailPost,a=e.id,n=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.every((function(e){return e._id!==a}))){e.next=11;break}return e.prev=1,e.next=4,Object(u.b)("post/".concat(a),n.token);case 4:s=e.sent,c({type:j.GET_POST,payload:s.data.post}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.post,a=e.auth,n=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(c){var s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:j.DELETE_POST,payload:t}),e.prev=1,e.next=4,Object(u.a)("post/".concat(t._id),a.token);case 4:s=e.sent,o={id:t._id,text:"\u0110\xe3 th\xeam m\u1ed9t b\xe0i vi\u1ebft m\u1edbi",recipients:s.data.newPost.user.followers,url:"/post/".concat(t._id)},c(Object(d.d)({msg:o,auth:a,socket:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.post,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((c=t.reports.find((function(e){return e===a.user._id})))&&c.length>0)){e.next=3;break}return e.abrupt("return",n({type:i.c.ALERT,payload:{error:"B\u1ea1n \u0111\xe3 b\xe1o c\xe1o b\xe0i vi\u1ebft n\xe0y"}}));case 3:return(o=Object(s.a)({},t)).reports.push(a.user._id),n({type:j.REPORT_POST,payload:o}),e.prev=6,e.next=9,Object(u.c)("post/".concat(t._id,"/report"),null,a.token);case 9:l=e.sent,n({type:i.c.ALERT,payload:{success:l.data.msg}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),n({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){var t=e.post,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.a)(Object(s.a)({},a.user),{},{saved:[].concat(Object(n.a)(a.user.saved),[t._id])}),c({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:o})}),e.prev=2,e.next=5,Object(u.c)("savePost/".concat(t._id),null,a.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e){var t=e.post,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(s.a)(Object(s.a)({},a.user),{},{saved:a.user.saved.filter((function(e){return e!==t._id}))}),n({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:c})}),e.prev=2,e.next=5,Object(u.c)("unSavePost/".concat(t._id),null,a.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()}},90:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a(1),r=a(13),s=a(6),o=a(9),i=a(56),u=a(0);t.default=function(){var e=Object(r.h)().id,t=Object(c.useState)([]),a=Object(n.a)(t,2),l=a[0],d=a[1],j=Object(s.c)((function(e){return e})),b=j.auth,p=j.detailPost,m=Object(s.b)();return Object(c.useEffect)((function(){if(m(Object(o.d)({detailPost:p,id:e,auth:b})),p.length>0){var t=p.filter((function(t){return t._id===e}));d(t)}}),[p,m,e,b]),Object(u.jsxs)("div",{className:"post-page",children:[0===l.length&&Object(u.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading...",className:"d-block mx-auto my-4"}),l.map((function(e){return Object(u.jsx)(i.a,{post:e},e._id)}))]})}},91:function(e,t,a){"use strict";a.r(t);var n=a(96),c=(a(1),a(13)),r=a(0);t.default=function(e){Object(n.a)(e);var t=Object(c.g)().state.users;return Object(r.jsxs)("div",{className:"search-page",children:[Object(r.jsx)("span",{children:"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm"}),t?t.map((function(e){return Object(r.jsx)("span",{children:e.username})})):Object(r.jsx)("span",{children:"Kh\xf4ng t\xecm th\u1ea5y"})]})}},92:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a(1),r=a(13),s=a(6),o=a(17),i=a(16),u=a(20),l=a(4),d=a.n(l),j=a(5),b=a(0),p=function(e){var t=e.user,a=Object(c.useState)(!1),r=Object(n.a)(a,2),i=r[0],u=r[1],l=Object(s.c)((function(e){return e})),p=l.auth,m=l.profile,O=l.socket,h=Object(s.b)(),f=Object(c.useState)(!1),v=Object(n.a)(f,2),g=v[0],x=v[1];Object(c.useEffect)((function(){return p.user.following.find((function(e){return e._id===t._id}))&&u(!0),function(){return u(!1)}}),[p.user.following,t._id]);var y=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return u(!0),x(!0),e.next=6,h(Object(o.b)({users:m.users,user:t,auth:p,socket:O}));case 6:x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return u(!1),x(!0),e.next=6,h(Object(o.d)({users:m.users,user:t,auth:p,socket:O}));case 6:x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:i?Object(b.jsx)("button",{className:"info-content_button",onClick:_,children:"Hu\u1ef7 theo d\xf5i"}):Object(b.jsx)("button",{className:"info-content_button",onClick:y,children:"Theo d\xf5i"})})},m=function(e){var t=e.users,a=e.setShowFollowing,n=Object(s.c)((function(e){return e})).auth;return Object(b.jsx)("div",{className:"follow",children:Object(b.jsxs)("div",{className:"follow_box",children:[Object(b.jsx)("h5",{className:"text-center follow_box-heading",children:"\u0110\xe3 theo d\xf5i"}),Object(b.jsx)("hr",{}),t.map((function(e){return Object(b.jsx)(u.a,{setShowFollowing:a,user:e,children:n.user._id!==e._id&&Object(b.jsx)(p,{user:e})},e._id)})),Object(b.jsx)("div",{className:"follow-close",onClick:function(){return a(!1)},children:Object(b.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"message"})})]})})},O=a(3),h=function(e){var t=e.users,a=e.setShowFollowers,n=Object(s.c)((function(e){return e})).auth;return Object(b.jsx)("div",{className:"follow",children:Object(b.jsxs)("div",{className:"follow_box",children:[Object(b.jsx)("h4",{className:"text-center follow_box-heading",children:"\u0110\u01b0\u1ee3c theo d\xf5i"}),Object(b.jsx)("hr",{}),t.map((function(e){return Object(b.jsx)(u.a,{setShowFollowers:a,user:e,children:n.user._id!==e._id&&Object(b.jsx)(p,{user:e})},e._id)})),Object(b.jsx)("div",{className:"follow-close",onClick:function(){return a(!1)},children:Object(b.jsx)("img",{className:"search-icon--close",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626912787/icon/error_l9krog.svg",alt:"message"})})]})})},f=function(e){var t=e.id,a=e.auth,r=e.profile,s=e.dispatch,o=Object(c.useState)([]),u=Object(n.a)(o,2),l=u[0],d=u[1],j=Object(c.useState)(!1),f=Object(n.a)(j,2),v=f[0],g=(f[1],Object(c.useState)(!1)),x=Object(n.a)(g,2),y=x[0],_=x[1],N=Object(c.useState)(!1),E=Object(n.a)(N,2),T=E[0],k=E[1];return Object(c.useEffect)((function(){if(t===a.user._id)d([a.user]);else{var e=r.users.filter((function(e){return e._id===t}));d(e)}}),[t,a,s,r.users]),Object(c.useEffect)((function(){s(y||T||v?{type:O.c.MODAL,payload:!0}:{type:O.c.MODAL,payload:!1})}),[y,T,v,s]),Object(b.jsx)("div",{className:"info",children:l.map((function(e){return Object(b.jsxs)("div",{className:"info-container",children:[Object(b.jsx)(i.a,{src:e.avatar,size:"supper-avatar"}),Object(b.jsxs)("div",{className:"info-content",children:[Object(b.jsx)("span",{className:"info-content_username",children:e.username}),Object(b.jsx)("div",{className:"info-content_buttons",children:e._id===a.user._id?Object(b.jsx)("button",{className:"info-content_button",onClick:function(){return s({type:O.c.EDIT_PROFILE,payload:!0})},children:"Ch\u1ec9nh s\u1eeda trang c\xe1 nh\xe2n"}):Object(b.jsx)(p,{user:e})}),Object(b.jsxs)("div",{className:"info-content_follows",children:[Object(b.jsxs)("span",{className:"info-content_follow",onClick:function(){return _(!0)},children:[e.followers.length," ng\u01b0\u1eddi theo d\xf5i"]}),Object(b.jsxs)("span",{className:"info-content_follow",onClick:function(){return k(!0)},children:["\u0110\xe3 theo d\xf5i ",e.following.length," ng\u01b0\u1eddi"]})]}),Object(b.jsx)("span",{className:"info-content_name",children:e.fullName}),Object(b.jsx)("span",{className:"info-content_email",children:e.email}),Object(b.jsx)("span",{className:"info-content_website",children:e.website}),Object(b.jsxs)("p",{className:"info-content_story",children:['"',e.story,'"']})]}),y&&Object(b.jsx)(h,{users:e.followers,setShowFollowers:_}),T&&Object(b.jsx)(m,{users:e.following,setShowFollowing:k})]},e._id)}))})},v=a(40),g=a(32),x=a(8),y=function(e){var t=e.auth,a=e.dispatch,r=Object(c.useState)([]),s=Object(n.a)(r,2),o=s[0],i=s[1],u=Object(c.useState)(9),l=Object(n.a)(u,2),p=l[0],m=l[1],h=Object(c.useState)(2),f=Object(n.a)(h,2),y=f[0],_=f[1],N=Object(c.useState)(!1),E=Object(n.a)(N,2),T=E[0],k=E[1];Object(c.useEffect)((function(){return k(!0),Object(x.b)("getSavePosts",t.token).then((function(e){i(e.data.savePosts),m(e.data.result),k(!1)})).catch((function(e){a({type:O.c.ALERT,payload:{error:e.response.data.msg}})})),function(){return i([])}}),[a,t.token]);var w=function(){var e=Object(j.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,Object(x.b)("getSavePosts?limit=".concat(9*y),t.token);case 3:a=e.sent,i(a.data.savePosts),m(a.data.result),_(y+1),k(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v.a,{posts:o,result:p}),T&&Object(b.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading..."}),Object(b.jsx)(g.a,{result:p,page:y,load:T,handleLoadMore:w})]})},_=a(2),N=function(e){var t=e.auth,a=e.profile,r=e.dispatch,s=e.id,i=Object(c.useState)([]),u=Object(n.a)(i,2),l=u[0],p=u[1],m=Object(c.useState)(9),O=Object(n.a)(m,2),h=O[0],f=O[1],y=Object(c.useState)(0),N=Object(n.a)(y,2),E=N[0],T=N[1],k=Object(c.useState)(!1),w=Object(n.a)(k,2),S=w[0],A=w[1];Object(c.useEffect)((function(){a.posts.forEach((function(e){e._id===s&&(p(e.posts),f(e.result),T(e.page))}))}),[a.posts,s]);var L=function(){var e=Object(j.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,Object(x.b)("user_posts/".concat(s,"?limit=").concat(9*E),t.token);case 3:a=e.sent,n=Object(_.a)(Object(_.a)({},a.data),{},{page:E+1,_id:s}),r({type:o.a.UPDATE_POST,payload:n}),A(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v.a,{posts:l,result:h}),S&&Object(b.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading..."}),Object(b.jsx)(g.a,{result:h,page:E,load:S,handleLoadMore:L})]})};t.default=function(){var e=Object(s.c)((function(e){return e})),t=e.profile,a=e.auth,i=Object(s.b)(),u=Object(r.h)().id,l=Object(c.useState)(!1),d=Object(n.a)(l,2),j=d[0],p=d[1];return Object(c.useEffect)((function(){t.ids.every((function(e){return e!==u}))&&i(Object(o.c)({id:u,auth:a}))}),[u,a,i,t.ids]),Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsx)(f,{auth:a,profile:t,dispatch:i,id:u}),a.user._id===u&&Object(b.jsxs)("div",{className:"profile_tab",children:[Object(b.jsx)("button",{className:j?"":"active",onClick:function(){return p(!1)},children:"B\xe0i vi\u1ebft"}),Object(b.jsx)("button",{className:j?"active":"",onClick:function(){return p(!0)},children:"\u0110\xe3 l\u01b0u"})]}),t.loading?Object(b.jsx)("img",{className:"d-block mx-auto my-4",src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading"}):Object(b.jsx)(b.Fragment,{children:j?Object(b.jsx)(y,{auth:a,dispatch:i}):Object(b.jsx)(N,{auth:a,profile:t,dispatch:i,id:u})})]})}},93:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(55),r=a(4),s=a.n(r),o=a(5),i=a(10),u=a(7),l=a(20),d=a(6),j=a(13),b=a(16),p=a(23),m=a(15),O=a(0),h=function(e){var t=e.user,a=e.msg,n=e.type,c=e.data,r=Object(d.c)((function(e){return e})).auth,s=Object(d.b)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"message-msgDisplay_".concat(n),children:[Object(O.jsx)("div",{className:"message-msgDisplay_avatar",children:Object(O.jsx)(b.a,{src:t.avatar,size:"small-avatar"})}),Object(O.jsx)("span",{children:t.username})]}),Object(O.jsxs)("div",{className:"message-msgDisplay_content",children:[a.text&&Object(O.jsx)("div",{className:"message-msgDisplay_text-".concat(n),children:a.text}),a.media&&a.media.map((function(e,t){return Object(O.jsx)("div",{style:{maxWidth:"380px",maxHeight:"380px"},children:e.url.match(/video/i)?Object(p.b)(e.url):Object(p.a)(e.url)},t)})),t._id===r.user._id&&Object(O.jsx)("div",{className:"message-msgDisplay_trash",children:Object(O.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){c&&window.confirm("B\u1ea1n th\u1eadt s\u1ef1 mu\u1ed1n xo\xe1?")&&s(Object(m.e)({msg:a,data:c,auth:r}))}})})]}),Object(O.jsx)("div",{className:"message-msgDisplay_date-".concat(n),children:new Date(a.createdAt).toLocaleString()})]})},f=a(3),v=a(34),g=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.message,c=e.theme,r=e.socket,b=Object(d.b)(),g=Object(j.h)().id,x=Object(n.useState)([]),y=Object(u.a)(x,2),_=y[0],N=y[1],E=Object(n.useState)(""),T=Object(u.a)(E,2),k=T[0],w=T[1],S=Object(n.useState)(0),A=Object(u.a)(S,2),L=A[0],C=A[1],P=Object(n.useState)([]),R=Object(u.a)(P,2),D=R[0],I=R[1],U=Object(n.useState)([]),F=Object(u.a)(U,2),G=F[0],q=F[1],M=Object(n.useState)(!1),H=Object(u.a)(M,2),z=H[0],V=H[1],B=Object(n.useRef)(),Y=Object(n.useRef)(),W=Object(j.f)();Object(n.useEffect)((function(){var e=a.data.filter((function(e){return e.sender===t.user._id||e.sender===g}));I(e)}),[a.data,t.user._id,g]),Object(n.useEffect)((function(){var e=a.users.find((function(e){return e._id===g}));e&&N(e)}),[a.users,g]);Object(n.useEffect)((function(){g&&function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b({type:m.a.GET_MESSAGES,payload:{messages:[]}}),C(1),e.next=4,b(Object(m.g)({auth:t,id:g}));case 4:setTimeout((function(){B.current.scrollIntoView({behavior:"smooth",block:"end"})}),100);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[g,b,t]);var K=function(){var e=Object(o.a)(s.a.mark((function e(a){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),k.trim()||0!==G.length){e.next=3;break}return e.abrupt("return");case 3:if(w(""),q([]),V(!0),n=[],!(G.length>0)){e.next=11;break}return e.next=10,Object(v.a)(G);case 10:n=e.sent;case 11:return c={sender:t.user._id,recipient:g,text:k,media:n,createdAt:(new Date).toISOString()},V(!1),e.next=15,b(Object(m.b)({msg:c,auth:t,socket:r}));case 15:B.current&&B.current.scrollIntoView({behaviour:"smooth",block:"end"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&C((function(e){return e+1}))}),{threshold:.1}).observe(Y.current)}),[C]),Object(n.useEffect)((function(){a.resultData>=9*(L-1)&&L>1&&b(Object(m.g)({auth:t,id:g,page:L}))}),[a.resultData,L,g,t,b]),Object(n.useEffect)((function(){B.current&&B.current.scrollIntoView({behaviour:"smooth",block:"end"})}),[k]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"message-header",children:0!==_.length&&Object(O.jsx)(l.a,{user:_,children:Object(O.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){if(window.confirm("B\u1ea1n th\u1eadt s\u1ef1 mu\u1ed1n xo\xe1?"))return b(Object(m.d)({auth:t,id:g})),W.push("/message")}})})}),Object(O.jsx)("div",{className:"message-body",children:Object(O.jsxs)("div",{className:"message-body-chat",ref:B,children:[Object(O.jsx)("button",{style:{marginTop:"-25px",opacity:0},ref:Y,children:"Xem th\xeam"}),D.map((function(e,a){return Object(O.jsxs)("div",{children:[e.sender!==t.user._id&&Object(O.jsx)("div",{className:"message-body-chat_other",children:Object(O.jsx)(h,{user:_,msg:e,type:"other"})}),e.sender===t.user._id&&Object(O.jsx)("div",{className:"message-body-chat_you",children:Object(O.jsx)(h,{user:t.user,msg:e,type:"you",data:D})})]},a)})),z&&Object(O.jsx)("div",{className:"chat_row you_message",children:Object(O.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1626030734/Spinner-0.4s-257px_v8vrp7.gif",alt:"Loading..."})})]})}),Object(O.jsxs)("form",{className:"message-footer",onSubmit:K,children:[Object(O.jsxs)("div",{className:"message-footer_upload",children:[Object(O.jsx)("input",{type:"file",id:"fileUploadMessage",multiple:!0,accept:"image/*,video/*",style:{display:"none"},onChange:function(e){var t=Object(i.a)(e.target.files),a="",n=[];t.forEach((function(e){return e?e.size>5242880?a="Image size must be less than 5 mb.":n.push(e):a="File does not exist."})),a&&b({type:f.c.ALERT,payload:{error:a}}),q([].concat(Object(i.a)(G),n))}}),Object(O.jsx)("label",{htmlFor:"fileUploadMessage",children:Object(O.jsx)("img",{src:"https://res.cloudinary.com/nguyenhnhatquang/image/upload/v1627442469/icon/picture_sphbkd.svg",alt:"message"})})]}),Object(O.jsx)("input",{className:"message-footer_input",type:"text",value:k,onChange:function(e){return w(e.target.value)}}),Object(O.jsx)("button",{type:"submit",className:"message-footer_submit",disabled:!(k||G.length>0),children:Object(O.jsx)("i",{className:"far fa-paper-plane"})}),Object(O.jsx)("div",{className:"message-footer_media",style:{display:G.length>0?"":"none"},children:G.map((function(e,t){return Object(O.jsxs)("div",{className:"message-footer_media-image",children:[e.type.match(/video/i)?Object(p.b)(URL.createObjectURL(e),c):Object(p.a)(URL.createObjectURL(e),c),Object(O.jsx)("span",{onClick:function(){return function(e){var t=Object(i.a)(G);t.splice(e,1),q(t)}(t)},children:"\xd7"})]},t)}))})]})]})};t.default=function(){return Object(O.jsxs)("div",{className:"message",children:[Object(O.jsx)("div",{className:"spaceRight"}),Object(O.jsxs)("div",{className:"messageBody",children:[Object(O.jsx)("div",{className:"message-left",children:Object(O.jsx)(c.a,{})}),Object(O.jsx)("div",{className:"message-right",children:Object(O.jsx)(g,{})})]})]})}}},[[159,1,2]]]);
//# sourceMappingURL=main.955034e5.chunk.js.map